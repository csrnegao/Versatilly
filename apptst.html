<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Minha Loja Virtual</title>
  <style>
    :root {
      --bg: #f5f5f5;
      --text: #333;
      --card: #fff;
      --accent: #4CAF50;
      --button-hover: #45a049;
      --shadow: rgba(0,0,0,0.1);
    }
    body.dark {
      --bg: #121212;
      --text: #f5f5f5;
      --card: #1e1e1e;
      --accent: #81c784;
      --button-hover: #66bb6a;
      --shadow: rgba(255,255,255,0.05);
    }
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: var(--bg);
      color: var(--text);
      transition: background-color 0.3s, color 0.3s;
    }
    h1, h2, h3 {
      color: var(--text);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .produto, .sacola, .admin {
      background: var(--card);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px var(--shadow);
      transition: background 0.3s, box-shadow 0.3s;
    }
    .produto {
      text-align: center;
      transition: transform 0.3s;
    }
    .produto:hover {
      transform: translateY(-5px);
    }
    .produto img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 10px;
    }
    .produto button {
      margin-top: 10px;
      padding: 8px 15px;
      background-color: var(--accent);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .produto button:hover {
      background-color: var(--button-hover);
    }
    ul {
      list-style: none;
      padding: 0;
    }
    ul li {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .remover-btn {
      background: #e74c3c;
      border: none;
      padding: 5px 10px;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    .remover-btn:hover {
      background: #c0392b;
    }
    form input, form select, form button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: var(--card);
      color: var(--text);
    }
    form button {
      background-color: #3498db;
      color: white;
      border: none;
    }
    form button:hover {
      background-color: #2980b9;
    }
    .frete {
      margin-top: 10px;
      font-weight: bold;
      color: #2ecc71;
    }
    .sacola.flash {
      box-shadow: 0 0 20px 5px var(--accent);
    }
    @media (max-width: 600px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<h1>Minha Loja Virtual</h1>
<button onclick="alternarDarkMode()" id="modo-btn" style="margin-bottom: 20px;">Modo Escuro</button>

<div class="grid" id="produtos">
  <!-- Produtos serão carregados aqui -->
</div>

<div class="sacola" id="sacola">
  <h2>Sacola de Compras</h2>
  <ul id="sacola-lista"></ul>
  <p><strong>Total: R$ <span id="total">0.00</span></strong></p>
  <p id="frete" class="frete"></p>

  <h3>Finalizar Compra</h3>
  <form id="checkout-form">
    <input type="text" id="nome" placeholder="Nome" required>
    <input type="text" id="endereco" placeholder="Endereço" required>
    <select id="pagamento" required>
      <option value="">Forma de Pagamento</option>
      <option value="cartao">Cartão</option>
      <option value="boleto">Boleto</option>
      <option value="pix">PIX</option>
    </select>
    <button type="submit">Finalizar Pedido</button>
  </form>
</div>

<div class="admin">
  <h2>Painel de Admin</h2>
  <form id="admin-form">
    <input type="text" id="novo-nome" placeholder="Nome do Produto" required>
    <input type="number" id="novo-preco" placeholder="Preço do Produto" required>
    <input type="text" id="novo-imagem" placeholder="URL da Imagem" required>
    <button type="submit">Adicionar Produto</button>
  </form>
</div>

<script>
  let produtos = [];

  let sacola = JSON.parse(localStorage.getItem('sacola')) || [];
  const produtosDiv = document.getElementById('produtos');
  const sacolaLista = document.getElementById('sacola-lista');
  const totalSpan = document.getElementById('total');
  const sacolaDiv = document.getElementById('sacola');
  const freteText = document.getElementById('frete');

  // Função para carregar os produtos
  function carregarProdutos() {
    produtos = [
      { id: 1, nome: 'Camisa', preco: 50.00, imagem: 'https://via.placeholder.com/200x150?text=Camisa' },
      { id: 2, nome: 'Calça', preco: 80.00, imagem: 'https://via.placeholder.com/200x150?text=Calça' },
      { id: 3, nome: 'Tênis', preco: 120.00, imagem: 'https://via.placeholder.com/200x150?text=T%C3%AAnis' },
      { id: 4, nome: 'Boné', preco: 30.00, imagem: 'https://via.placeholder.com/200x150?text=Bon%C3%A9' }
    ];
    renderizarProdutos();
  }

  // Função para renderizar os produtos no grid
  function renderizarProdutos() {
    produtosDiv.innerHTML = '';
    produtos.forEach(produto => {
      const div = document.createElement('div');
      div.className = 'produto';
      div.innerHTML = `
        <img src="${produto.imagem}" alt="${produto.nome}">
        <h3>${produto.nome}</h3>
        <p>R$ ${produto.preco.toFixed(2)}</p>
        <input type="number" id="quantidade-${produto.id}" value="1" min="1" style="width: 60px;">
        <br>
        <button onclick="adicionarSacola(${produto.id})">Inserir</button>
      `;
      produtosDiv.appendChild(div);
    });
  }

  // Função para adicionar item à sacola
  function adicionarSacola(id) {
    const produto = produtos.find(p => p.id === id);
    const quantidade = parseInt(document.getElementById(`quantidade-${id}`).value);

    if (quantidade <= 0) {
      alert("Quantidade inválida!");
      return;
    }

    const itemExistente = sacola.find(item => item.id === id);
    if (itemExistente) {
      itemExistente.quantidade += quantidade;
    } else {
      sacola.push({ ...produto, quantidade });
    }
    atualizarSacola();
    flashSacola();
  }

  // Função para remover item da sacola
  function removerProduto(id) {
    const index = sacola.findIndex(item => item.id === id);
    if (index > -1) {
      sacola.splice(index, 1);
      atualizarSacola();
    }
  }

  // Função para atualizar sacola
  function atualizarSacola() {
    sacolaLista.innerHTML = '';
    let total = 0;
    sacola.forEach(item => {
      const li = document.createElement('li');
      li.innerHTML = `
        ${item.nome} - ${item.quantidade}x - R$ ${(item.preco * item.quantidade).toFixed(2)}
        <button class="remover-btn" onclick="removerProduto(${item.id})">Remover</button>
      `;
      sacolaLista.appendChild(li);
      total += item.preco * item.quantidade;
    });
    totalSpan.textContent = total.toFixed(2);
    localStorage.setItem('sacola', JSON.stringify(sacola));

    if (total >= 200) {
      freteText.textContent = "Frete Grátis!";
    } else if (total > 0) {
      freteText.textContent = "Frete: R$ 20,00";
    } else {
      freteText.textContent = "";
    }
  }

  // Função para dar um efeito de destaque à sacola
  function flashSacola() {
    sacolaDiv.classList.add('flash');
    setTimeout(() => {
      sacolaDiv.classList.remove('flash');
    }, 500);
  }

  // Finalizar pedido e abrir WhatsApp
  document.getElementById('checkout-form').addEventListener('submit', function(event) {
    event.preventDefault();
    if (sacola.length === 0) {
      alert('Sua sacola está vazia!');
      return;
    }

    const nome = document.getElementById('nome').value;
    const endereco = document.getElementById('endereco').value;
    const pagamento = document.getElementById('pagamento').value;

    let mensagem = `*Pedido Loja Virtual*\n`;
    mensagem += `\n*Nome:* ${nome}`;
    mensagem += `\n*Endereço:* ${endereco}`;
    mensagem += `\n*Forma de Pagamento:* ${pagamento}`;
    mensagem += `\n\n*Itens:*`;

    sacola.forEach(item => {
      mensagem += `\n- ${item.quantidade}x ${item.nome} (R$ ${(item.preco * item.quantidade).toFixed(2)})`;
    });

    mensagem += `\n\n*Total:* R$ ${parseFloat(totalSpan.textContent).toFixed(2)}`;

    // Coloque aqui o número de WhatsApp que receberá o pedido:
    const numeroWhatsapp = '5585991769080'; // <-- Substitua pelo seu número (com DDI e DDD, só números)

    const url = `https://wa.me/${numeroWhatsapp}?text=${encodeURIComponent(mensagem)}`;

    window.open(url, '_blank');

    sacola = [];
    atualizarSacola();
    localStorage.removeItem('sacola');
    this.reset();
  });

  // Carregar os produtos quando a página for carregada
  window.onload = carregarProdutos;

</script>

</body>
</html>